#!/usr/bin/perl

use Match;


main ();

sub headerTable {
    my ($body, $left, $right) = @_;

    my $output = "<table border=0 cellpadding=2 cellspacing=2><tr><td valign=top>$body";
    $output .= "</td></tr><tr><td valign=top colspan=1> <table width='100%' border=0 cellspacing=2 cellpadding=2>";
    $output .= "<tr> <td align=left ><a href='?s=T&-9999' title='Match against '><font color='#00000c' >$left</font></a> </td> <td align=right valign=bottom><a href='?s=T&9999' title='Match against '><font color='#0000cc' size=2>$right</font></a> </td> </tr> </table> </td> </tr> </table>";

    return $output;
}

sub headerTable1 (\@$$) {
    my ($body, $left, $right) = @_;

    my $output = "<table border=0 cellpadding=2 cellspacing=2><tr>";
    
    foreach my $b (@$body) {
        $output .= "<td valign=top>$b</td>";
    }
    $output .= "</tr><tr><td valign=top colspan=" . scalar @$body . "> <table width='100%' border=0 cellspacing=2 cellpadding=2>";
    $output .= "<tr> <td align=left ><a href='?s=T&-9999' title='Match against '><font color='#00000c' >$left</font></a> </td> <td align=right valign=bottom><a href='?s=T&9999' title='Match against '><font color='#0000cc' size=2>$right</font></a> </td> </tr> </table> </td> </tr> </table>";

    return $output;
}

sub fillerTable {
    my ($body) = @_;

    ## basically an inner table 
    my $output = "<table border=1 cellpadding=2 cellspacing=2>";
    $output .= "<tr>";
    $output .= "<td valign=top>$body</td>";
    $output .= "</tr></table>";

    return headerTable(innerTable1 ($body, ""), "", "");
}

sub innerTable1 ($$) {
    my ($body, $color) = @_;

    my $output = "<table border=1 cellpadding=2 cellspacing=2 class=Cc0c0c0 bordercolor='#c0c0c0'>";
    $output .= "<tr>";
    $output .= "<td valign=top bgcolor='#c0c0c0' class=Cc0c0c0>$body</td>";
    $output .= "</tr></table>";

    return $output;
}

sub innerTable (\@$) {
    my ($body, $color) = @_;

    #my $output = "<table border=0 bordercolor='$color' cellpadding=1 cellspacing=1> 
        #<tr>";

    #foreach $b (@$body) {
        #$output .= "<td class='top' bgcolor='$color' >$b</td>";
    #}
   
    my $output = "<table border=1 cellpadding=2 cellspacing=2 class=Cc0c0c0 bordercolor='#c0c0c0'>";
    $output .= "\n<tr>";

    foreach $b (@$body) {
        $output .= "<td valign=top bgcolor='#c0c0c0' class=Cc0c0c0>\n\n\nTEST\n</td>\n\n\n";
    }
    
    $output .= "</tr></table>";


    return $output;
}

sub charTable {
    my ($char, $type) = @_;

    #my $output = "<table border=0 >
                #<tr>
                    #<td class='top' align=center bgcolor='#ffffff'><font size=2 color='#000000'>$char</font>
                    #</td>
                #</tr>
                #<tr>
                    #<td class='top'>
                        #<table width='100%' border=0>
                            #<tr>
                                #<td align=left >$type </td>
                                #<td>&nbsp </td>
                                #<td align=right valign=bottom>$char</td>
                            #</tr>
                        #</table>
                    #</td>
                #</tr>
            #</table>
    #";
   
    my $output = <<END;

<table border=0 cellpadding=2>
    <tr>
        <td valign=top align=center bgcolor='#fffff'><font size=2 color='#000000'>t</font>
        </td>
    </tr>
    <tr>
        <td valign=top>
            <table width='100%' border=0 cellspacing=2 cellpadding=2>
                <tr>
                    <td  align=left ><a href='?s=Test&#032;&12' title='Match against Any Single Character'><font color='#00000c'>c</font></a>
                    </td>
                    <td>&nbsp
                    </td>
                    <td align=right valign=bottom><a href='?s=Test&#032;&-12' title='Match against t'><font color='#0000cc' size=2>t</font></a>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
END


    return $output;
}

sub main {
    print "Content-type: text/html\n\n";

    print "<html><head>";

    @wTables = (
            headerTable (innerTable1 (charTable ("T", "c"), ""), "w", "T"),
            headerTable (innerTable1 (charTable ("e", "c"), ""), "w", "e"),
            headerTable (innerTable1 (charTable ("s", "c"), ""), "w", "s"),
            headerTable (innerTable1 (charTable ("t", "c"), ""), "w", "t"),

        );
    @varTableCells = ( 
                innerTable1 (fillerTable ($wTables [0]), "blue"),
                innerTable1 (fillerTable ($wTables [1]), "blue"),
                innerTable1 (fillerTable ($wTables [2]), "blue"),
                innerTable1 (fillerTable ($wTables [3]), "blue"),
            );
    $var = headerTable1(@varTableCells, "var", "Test");
    $wordTable = headerTable(innerTable1 ($var, "yellow"), "word", "Test");

    #
    # NOW BUILD THE TABLE WITH THE SPACE
    #
    $spaceTable = headerTable (innerTable1 (fillerTable (fillerTable (fillerTable (charTable ("_", "c"))), ""), ""), "w", "_");

    #
    # NOW BUILD THE ONE TABLE
    #
    @wTables2 = (
            headerTable (innerTable1 (charTable ("O", "c"), ""), "w", "o"),
            headerTable (innerTable1 (charTable ("n", "c"), ""), "w", "n"),
            headerTable (innerTable1 (charTable ("e", "c"), ""), "w", "e"),

        );

    @stateCells = (
        innerTable1 ($wTables [1], "blue"),
        innerTable1 ($wTables [2], "blue"),
    );

    $state = headerTable1(@stateCells, "usstate", "ne");

    @varTableCells = (
        innerTable1 (fillerTable ($wTables [0]), "blue"),
        innerTable1 ($state, "blue"),
    );

    $var2 = headerTable1(@varTableCells, "var", "one");
    $wordTable2 = headerTable(innerTable1 ($var2, "yellow"), "word", "one");


    @allTables = ( 
        innerTable1 ($wordTable, "blue"),
        innerTable1 ($spaceTable, "blue"), 
        innerTable1 ($wordTable2, "blue") );

    $outsideTable = headerTable1 (@allTables, "", "");


    print headerTable (innerTable1 ($outsideTable, "blue"), "", "");
    return;
}
